{% extends "base.html" %}
{% block title %}New Workflow{% endblock %}

{% block content %}
<script>
    function toggle() {
        var working_dir = document.getElementById("working_dir").value;
        if (/\S/.test(working_dir)){
            var msg = document.getElementById("msg");
            msg.style.display = "block";
            var btn = document.getElementById("submit_btn");
            btn.disabled = true;
        }
    }
  </script>

<h2>New Workflow</h2>

<form class="new_wf" method="post" action="{{ url_for('submit_wf') }}">
    <div class="form-group">
        <label for="wf_type"><strong>Workflow Type:</strong></label>
        <select class="form-control" id="wf_type" name="wf_type">
            <option value="Band Structure">Band Structure</option>
            <option value="Elastic Tensor">Elastic Tensor</option>
            <option value="Phonons">Phonons</option>
        </select>

        <label for="working_dir"><strong>Working Directory: </strong>(Absolute path of current workspace on Queue Cluster)</label>        
        <input type="text" class="form-control" id="working_dir" name="working_dir" required>

        <label for="structure_file"><strong>Structure File Path:</strong> (If the input file path is a directory, all cif files in the directory will be submitted.)</label>        
        <input type="text" class="form-control" id="structure_file" name="structure_file" >

        <label for="parameter_file"><strong>Parameter File Path:</strong> (Optional)</label>        
        <input type="text" class="form-control" id="paramter_file" name="paramter_file">

    <hr/>
        <button id="submit_btn" type="submit" class="btn btn-primary submission" onclick="toggle()">Submit</button>
        <p class="msg" id="msg" style="display:none;">Submitting...Please hold on.</p>
</form>
{% endblock %}
